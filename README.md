# 陶瓷缺陷数据收集小程序

这是一个专门用于收集陶瓷产品缺陷图像数据的微信小程序，旨在为AI缺陷分类模型提供训练数据。支持本地存储和云端一键上传功能。

## 功能特性

### 📸 数据采集功能
- **拍照功能**：调用微信相机API进行拍照
- **缺陷分类**：支持7种缺陷类型选择（裂纹、气泡、变形、划痕、污渍、缺釉、正常）
- **位置信息**：自动记录采集位置（可选）

### ☁️ 云端数据管理
- **本地存储**：所有数据先保存在本地
- **一键上传**：支持批量上传全部本地数据到云端
- **上传状态**：实时显示上传进度和状态
- **数据同步**：自动跟踪已上传和待上传的数据

### 📊 数据管理功能
- **历史记录**：查看所有采集的数据记录
- **搜索筛选**：支持按关键词搜索和缺陷类型筛选
- **数据统计**：实时统计各类型缺陷数量和占比
- **记录删除**：支持删除不需要的记录

### 🎨 用户界面
- **现代化设计**：采用Material Design风格
- **响应式布局**：适配不同尺寸屏幕
- **流畅动画**：提供良好的用户体验
- **美观按键**：简化的缺陷类型选择界面

## 项目结构

```
ceramic-defect-collector/
├── pages/
│   ├── index/           # 首页（包含云端上传功能）
│   │   ├── index.wxml
│   │   ├── index.wxss
│   │   └── index.js
│   ├── collect/         # 数据收集页面（简化版）
│   │   ├── collect.wxml
│   │   ├── collect.wxss
│   │   └── collect.js
│   └── history/         # 历史记录页面（移除导出功能）
│       ├── history.wxml
│       ├── history.wxss
│       └── history.js
├── cloudfunctions/      # 云开发配置
├── images/              # 图片资源
├── app.js               # 全局应用逻辑
├── app.wxss             # 全局样式
├── app.json             # 应用配置（包含云开发）
└── project.config.json  # 项目配置
```

## 缺陷类型说明

| 类型 | 描述 | 特征 |
|------|------|------|
| 裂纹 | 陶瓷表面或内部的裂缝 | 线状、分叉状裂痕 |
| 气泡 | 烧制过程中产生的气泡 | 圆形或椭圆形凸起 |
| 变形 | 形状不规整或扭曲 | 整体或局部变形 |
| 划痕 | 表面划伤痕迹 | 线状凹痕 |
| 污渍 | 表面污染或色斑 | 颜色异常区域 |
| 缺釉 | 釉面缺失或不均匀 | 表面粗糙或露胎 |
| 正常 | 无明显缺陷的合格品 | 表面光滑、形状规整 |

## 技术实现

### 核心技术# 陶瓷缺陷数据收集小程序

这是一个专门用于收集陶瓷产品缺陷图像数据的微信小程序，旨在为AI缺陷分类模型提供训练数据。

## 功能特性

### 📸 数据采集功能
- **拍照功能**：调用微信相机API进行拍照
- **缺陷分类**：支持7种缺陷类型选择（裂纹、气泡、变形、划痕、污渍、缺釉、正常）
- **备注信息**：可添加详细的备注说明
- **位置信息**：自动记录采集位置（可选）

### 📊 数据管理功能
- **历史记录**：查看所有采集的数据记录
- **搜索筛选**：支持按关键词搜索和缺陷类型筛选
- **数据统计**：实时统计各类型缺陷数量和占比
- **数据导出**：支持数据导出和分享

### 🎨 用户界面
- **现代化设计**：采用Material Design风格
- **响应式布局**：适配不同尺寸屏幕
- **流畅动画**：提供良好的用户体验
- **深色模式**：支持系统深色模式

## 项目结构

```
ceramic-defect-collector/
├── pages/
│   ├── index/           # 首页
│   │   ├── index.wxml
│   │   ├── index.wxss
│   │   └── index.js
│   ├── collect/         # 数据收集页面
│   │   ├── collect.wxml
│   │   ├── collect.wxss
│   │   └── collect.js
│   └── history/         # 历史记录页面
│       ├── history.wxml
│       ├── history.wxss
│       └── history.js
├── images/              # 图片资源
├── app.js               # 全局应用逻辑
├── app.wxss             # 全局样式
├── app.json             # 应用配置
└── project.config.json  # 项目配置
```

## 缺陷类型说明

| 类型 | 描述 | 特征 |
|------|------|------|
| 裂纹 | 陶瓷表面或内部的裂缝 | 线状、分叉状裂痕 |
| 气泡 | 烧制过程中产生的气泡 | 圆形或椭圆形凸起 |
| 变形 | 形状不规整或扭曲 | 整体或局部变形 |
| 划痕 | 表面划伤痕迹 | 线状凹痕 |
| 污渍 | 表面污染或色斑 | 颜色异常区域 |
| 缺釉 | 釉面缺失或不均匀 | 表面粗糙或露胎 |
| 正常 | 无明显缺陷的合格品 | 表面光滑、形状规整 |

## 技术实现

### 核心技术
- **微信小程序框架**：使用原生小程序开发
- **本地存储**：使用wx.setStorageSync进行数据持久化
- **相机API**：调用wx.chooseMedia进行拍照
- **文件管理**：使用wx.saveFile保存图片

### 数据结构
```javascript
// 数据记录结构
{
  id: "唯一标识符",
  imagePath: "图片本地路径",
  defectType: "缺陷类型",
  note: "备注信息",
  createTime: "创建时间(ISO格式)",
  location: {
    latitude: "纬度",
    longitude: "经度"
  }
}
```

## 安装使用

### 开发环境要求
- 微信开发者工具
- 微信小程序开发者账号
- Node.js（可选，用于预处理）

### 安装步骤
1. 下载并安装微信开发者工具
2. 创建新的小程序项目
3. 将代码文件复制到项目目录
4. 在`project.config.json`中配置你的AppID
5. 添加所需的图片资源到`images`目录
6. 在开发者工具中预览和调试

### 权限配置
在`app.json`中已配置以下权限：
- `scope.camera`：访问摄像头权限
- `scope.writePhotosAlbum`：保存到相册权限

## 图片资源

需要准备以下图片资源（建议尺寸）：

### 图标类（32x32px）
- `home.png` / `home-active.png` - 首页图标
- `camera.png` / `camera-active.png` - 相机图标
- `history.png` / `history-active.png` - 历史图标
- `search.png` - 搜索图标
- `arrow-down.png` - 下拉箭头
- `location.png` - 位置图标
- `close.png` - 关闭图标

### 缺陷类型图标（64x64px）
- `crack.png` - 裂纹
- `bubble.png` - 气泡
- `deform.png` - 变形
- `scratch.png` - 划痕
- `stain.png` - 污渍
- `glaze.png` - 缺釉
- `normal.png` - 正常

### 其他资源
- `ceramic-logo.png` - 应用logo（120x120px）
- `empty.png` - 空状态图标（120x120px）
- `success.png` - 成功图标（100x100px）

## 数据导出格式

支持JSON格式导出，包含以下字段：
```json
{
  "id": "记录ID",
  "defectType": "缺陷类型",
  "note": "备注信息",
  "createTime": "创建时间",
  "location": "位置信息"
}
```

## 注意事项

1. **存储限制**：小程序本地存储限制为10MB，注意控制图片数量
2. **图片质量**：建议拍照时保持良好的光线条件
3. **网络要求**：部分功能需要网络连接（如位置服务）
4. **权限申请**：首次使用需要用户授权相机和相册权限

## 扩展功能

### 可考虑的增强功能
- 云端数据同步
- 批量导出功能
- 图片压缩优化
- 离线数据同步
- 数据统计图表
- 二维码分享
- 标注功能

## 常见问题

### Q: 拍照失败怎么办？
A: 检查相机权限是否已授权，或尝试重启小程序。

### Q: 数据丢失如何恢复？
A: 数据存储在本地，卸载小程序会导致数据丢失，建议定期导出备份。

### Q: 支持哪些图片格式？
A: 主要支持JPG格式，由微信相机API自动处理。

## 版本历史

- **v1.0.0** - 初始版本，包含基础的数据采集和管理功能
- 支持拍照、缺陷分类、数据存储、历史查看等核心功能

## 贡献指南

欢迎提交Issue和Pull Request来改进这个项目。在贡献代码之前，请确保：
1. 代码风格保持一致
2. 添加必要的注释
3. 测试功能正常运行

## 许可证

本项目采用MIT许可证，详情请参阅LICENSE文件。